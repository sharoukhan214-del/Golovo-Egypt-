<div class="card">
    <h2>نشر وجبة جديدة</h2>
    <input type="text" id="mealName" placeholder="اسم الوجبة">
    
    <select id="isFree" onchange="updateView()">
        <option value="paid">وجبة بفلوس (عمولة 15%)</option>
        <option value="free">وجبة مجانية (خير)</option>
    </select>

    <div id="priceDiv">
        <input type="number" id="mealPrice" placeholder="سعر الوجبة" oninput="showSellerNote()">
    </div>
    
    <input type="number" id="mealQty" placeholder="عدد الوجبات المتاحة">
    
    <p id="sellerNote" style="font-size: 14px; color: #666;"></p>

    <button onclick="saveMealToStorage()" class="btn-main">نشر العرض</button>
</div>

<script>
function updateView() {
    const type = document.getElementById('isFree').value;
    document.getElementById('priceDiv').style.display = (type === 'free') ? 'none' : 'block';
    showSellerNote();
}

function showSellerNote() {
    const price = document.getElementById('mealPrice').value || 0;
    const note = document.getElementById('sellerNote');
    if(price > 0) {
        let net = price - (price * 0.15);
        note.innerHTML = `ستستلم من العميل <b>${net.toFixed(2)} ج.م</b> للوجبة (بعد خصم 15%).`;
    } else { note.innerText = ""; }
}

function saveMealToStorage() {
    // كود الحفظ اللي بينقل البيانات لصفحة المشتري
    alert("تم النشر بنجاح!");
}
</script>
