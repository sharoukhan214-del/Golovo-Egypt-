<div class="app-container">
    <div class="card">
        <h2>Ù†Ø´Ø± ÙˆØ¬Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© ğŸ“¢</h2>
        
        <input type="text" id="mealName" placeholder="Ø§Ø³Ù… Ø§Ù„ÙˆØ¬Ø¨Ø©">
        
        <select id="offerType" onchange="checkType()" style="width:100%; padding:12px; margin:10px 0; border-radius:10px;">
            <option value="paid">Ø¹Ø±Ø¶ Ø¨ÙÙ„ÙˆØ³ (Ø¯ÙØ¹ Ø¹Ù…ÙˆÙ„Ø© 15% Ù…Ù‚Ø¯Ù…Ø§Ù‹)</option>
            <option value="free">Ø¹Ø±Ø¶ Ù…Ø¬Ø§Ù†ÙŠ (Ù†Ø´Ø± ÙÙˆØ±ÙŠ Ø¨Ø¯ÙˆÙ† Ø¹Ù…ÙˆÙ„Ø©)</option>
        </select>

        <input type="number" id="mealPrice" placeholder="Ø³Ø¹Ø± Ø§Ù„ÙˆØ¬Ø¨Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©">
        <input type="number" id="mealQty" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©">
        
        <div id="paymentBox" style="background:#fff3cd; padding:15px; border-radius:12px; margin:15px 0; display:none; border: 1px solid #ffeeba;">
            <p style="margin:0; font-size:14px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¨ÙŠØ¹Ø§ØªÙƒ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©: <span id="totalSales">0</span> Ø¬.Ù…</p>
            <p style="margin:5px 0; font-weight:bold; color:#d63031;">Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (15%): <span id="commissionAmount">0</span> Ø¬.Ù…</p>
        </div>

        <button id="actionBtn" class="btn-main" onclick="handleAction()">Ù†Ø´Ø± Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<script>
function checkType() {
    const type = document.getElementById('offerType').value;
    const priceInput = document.getElementById('mealPrice');
    const paymentBox = document.getElementById('paymentBox');
    const actionBtn = document.getElementById('actionBtn');

    if(type === 'free') {
        priceInput.value = 0;
        priceInput.disabled = true;
        paymentBox.style.display = 'none';
        actionBtn.innerText = "Ù†Ø´Ø± Ø§Ù„Ø¹Ø±Ø¶ Ù…Ø¬Ø§Ù†Ø§Ù‹";
        actionBtn.style.background = "#2ecc71";
    } else {
        priceInput.disabled = false;
        paymentBox.style.display = 'block';
        actionBtn.innerText = "Ø§Ø¯ÙØ¹ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© ÙˆØ§Ù†Ø´Ø± Ø§Ù„Ø¹Ø±Ø¶";
        actionBtn.style.background = "#e67e22";
    }
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ù„Ø­Ø¸ÙŠØ§Ù‹
document.addEventListener('input', function() {
    const price = parseFloat(document.getElementById('mealPrice').value) || 0;
    const qty = parseInt(document.getElementById('mealQty').value) || 0;
    const total = price * qty;
    const comm = total * 0.15;

    document.getElementById('totalSales').innerText = total.toFixed(2);
    document.getElementById('commissionAmount').innerText = comm.toFixed(2);
});

function handleAction() {
    const type = document.getElementById('offerType').value;
    const name = document.getElementById('mealName').value;
    const qty = document.getElementById('mealQty').value;

    if(!name || !qty) {
        alert("Ø§ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ¬Ø¨Ø© ÙˆØ§Ù„Ø¹Ø¯Ø¯ Ø£ÙˆÙ„Ø§Ù‹");
        return;
    }

    if(type === 'paid') {
        const comm = (document.getElementById('mealPrice').value * qty) * 0.15;
        // Ù‡Ù†Ø§ Ø¨Ù†Ø­ÙˆÙ„ Ø§Ù„Ø¨Ø§Ø¦Ø¹ Ù„ØµÙØ­Ø© Ø¯ÙØ¹ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©
        alert("Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ø§Ù„Ø¢Ù† Ù„Ø¯ÙØ¹ Ø¹Ù…ÙˆÙ„Ø© Ù‚Ø¯Ø±Ù‡Ø§ " + comm.toFixed(2) + " Ø¬.Ù… Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶");
        location.href = "pay_commission.html?amount=" + comm; 
    } else {
        // Ù„Ùˆ Ù…Ø¬Ø§Ù†ÙŠ ÙŠÙ†Ø´Ø± Ø¹Ù„Ø·ÙˆÙ„
        saveMeal();
        alert("ØªÙ… Ù†Ø´Ø± Ø¹Ø±Ø¶Ùƒ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ Ø¨Ù†Ø¬Ø§Ø­! Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ.");
    }
}

function saveMeal() {
    // ÙƒÙˆØ¯ Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ù€ LocalStorage Ø§Ù„Ù„ÙŠ Ø¹Ù…Ù„Ù†Ø§Ù‡ Ù‚Ø¨Ù„ ÙƒØ¯Ø©
}
</script>
